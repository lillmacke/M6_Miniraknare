def add(x,y):
    return x + y

def sub(x,y):
    return x - y

def mult(x,y):
    return x * y

def div(x,y):
    if y == 0:
        raise ValueError("Division med noll är inte tillåten.")
    return x / y 

operatorer = {"+": add,
            "-":sub,
            "*": mult,
            "/": div
}

def dela_upp(uttryck):
    tal_lista = []
    tal = ""

    for i, tecken in enumerate(uttryck):
        if tecken.isdigit() or tecken == ".":
            tal += tecken

        elif tecken in "+-*/":
            if tecken == "-" and (i == 0 or uttryck[i-1] in "+-*/("):
                tal += tecken
            else: 
                if tal:
                    tal_lista.append(tal)
                    tal = ""
                tal_lista.append(tecken)
        elif tecken == " ":
            continue
        else:
            print(f"Oväntat tecken: {tecken}")

    if tal:
        tal_lista.append(tal)
    
    return tal_lista

# jämn index är tal, ojämn index är operatorer

def beräkna_tal_från_lista(tal_lista,operatorer):
    if len(tal_lista) % 2 == 0:
        raise ValueError("Ogiltigt uttryck: saknas tal eller operator.")

    resultat = float(tal_lista[0])
    for i in range(1,len(tal_lista), 2):
        op = tal_lista[i]

        try:
            nästa_tal = float(tal_lista[i+1])
        except ValueError:
            raise ValueError(f"Ogiltigt tal: {tal_lista[i+1]}")
        
        if op not in operatorer:
            print(f"Ogiltig operator {op}")
            continue
        resultat = operatorer[op](resultat, nästa_tal)

    return resultat



uttryck = input("Skriv uttryck: ")
tal_lista = dela_upp(uttryck)
resultat = beräkna_tal_från_lista(tal_lista, operatorer)
print("Resultat: ", resultat)
